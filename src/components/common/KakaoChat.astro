---
const KAKAO_CHANNEL_KEY = import.meta.env.KAKAO_CHANNEL_KEY;

if (KAKAO_CHANNEL_KEY) {
  // 카카오톡 관련 로직을 제거하거나 HTML 렌더링 측면에서 안전하게 처리합니다.
}
---

{KAKAO_CHANNEL_KEY && (
  <div class="kakao-chat-container">
    <div id="kakao-talk-channel-chat-button" class="fixed bottom-6 right-6 z-40" data-kakao-key={KAKAO_CHANNEL_KEY}></div>
    <Fragment set:html={`<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js" integrity="sha384-MEOKk8cu9cgeOjoVLI3yJIdJzNYHDwQeGjNGAkkJkzvYnKvaG2BfUjsbuEvU8m+R" crossorigin="anonymous"></script>
<script>
  window.onload = function() {
    var chatButton = document.getElementById('kakao-talk-channel-chat-button');
    if (!chatButton) return;
    var kakaoKey = chatButton.getAttribute('data-kakao-key');
    if (!kakaoKey || !window.Kakao) return;
    window.Kakao.init(kakaoKey);
    window.Kakao.Channel.createChatButton({
      container: '#kakao-talk-channel-chat-button',
      channelPublicId: '_xjxnxcG',
      title: '카카오톡 채널 채팅',
      size: 'small',
      color: 'yellow',
      shape: 'circle',
      'support-multiple-densities': true,
    });
  };
</script>`} />
  </div>
)}

